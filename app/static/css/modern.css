/* Modern, mobile-friendly layer. Keep selectors additive to avoid breaking existing behavior. */
:root {
  --bg: #0e1013;
  --bg-elev: #151922;
  --text: rgba(255,255,255,0.9);
  --text-muted: rgba(255,255,255,0.65);
  --brand: #00b894;
  --brand-2: #0984e3;
  --border: rgba(255,255,255,0.08);
  --radius: 10px;

  /* Buttons and form colors */
  --btn-primary-bg: #0aa37a;
  --btn-primary-border: #0aa37a;
  --btn-primary-text: #ffffff;
  --btn-danger-bg: #e17055;
  --btn-danger-border: #e17055;
  --btn-success-bg: #00c853;
  --btn-success-border: #00c853;

  --input-bg: #11161f;
  --input-border: rgba(255,255,255,0.12);
  --input-text: var(--text);
  --input-placeholder: rgba(255,255,255,0.5);
  --focus-ring: rgba(9,132,227,0.45);
}

/* Optional light theme (auto via prefers-color-scheme) */
@media (prefers-color-scheme: light) {
  :root {
    --bg: #f6f7fb;
    --bg-elev: #ffffff;
    --text: #1f2937;
    --text-muted: #475569;
    --border: rgba(2,6,23,0.08);

    --btn-primary-bg: #0ea5e9;
    --btn-primary-border: #0284c7;
    --btn-primary-text: #ffffff;
    --btn-danger-bg: #ef4444;
    --btn-danger-border: #dc2626;
    --btn-success-bg: #22c55e;
    --btn-success-border: #16a34a;

    --input-bg: #ffffff;
    --input-border: rgba(2,6,23,0.12);
    --input-text: #0f172a;
    --input-placeholder: #64748b;
    --focus-ring: rgba(14,165,233,0.4);
  }
}

/* Manual override: add data-theme="light" on <html> or <body> to force light */
:root[data-theme="light"], body[data-theme="light"] {
  --bg: #f6f7fb;
  --bg-elev: #ffffff;
  --text: #1f2937;
  --text-muted: #475569;
  --border: rgba(2,6,23,0.08);

  --btn-primary-bg: #0ea5e9;
  --btn-primary-border: #0284c7;
  --btn-primary-text: #ffffff;
  --btn-danger-bg: #ef4444;
  --btn-danger-border: #dc2626;
  --btn-success-bg: #22c55e;
  --btn-success-border: #16a34a;

  --input-bg: #ffffff;
  --input-border: rgba(2,6,23,0.12);
  --input-text: #0f172a;
  --input-placeholder: #64748b;
  --focus-ring: rgba(14,165,233,0.4);
}

html { font-size: 16px; }
@media (max-width: 420px) { html { font-size: 15px; } }

body.bg-dark {
  background-color: var(--bg) !important;
  color: var(--text-muted);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.container {
  max-width: 1200px;
}

/* Card tweaks for cleaner elevation and rounded corners */
.card.bg-dark {
  background-color: var(--bg-elev) !important;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  overflow: hidden;
}
.card-header {
  border-bottom: 1px solid var(--border);
}
.card-body {
  padding: 1rem 1.25rem;
}

/* Navbar modernization without changing classes */
.navbar.bg-dark {
  background: linear-gradient(180deg, #12161f 0%, #0f131a 100%) !important;
  border-bottom: 1px solid var(--border);
}
.navbar-brand { font-weight: 600; letter-spacing: 0.2px; }
.nav-link { color: var(--text-muted) !important; }
.nav-link:hover, .dropdown-item:hover { color: var(--text) !important; background-color: rgba(255,255,255,0.06) !important; }
.dropdown-menu.navbar-dark.bg-dark { background-color: #151922 !important; border: 1px solid var(--border); border-radius: 8px; }

/* Ensure toggler icon is visible on dark navbars */
.navbar-dark .navbar-toggler { border-color: rgba(255,255,255,0.15); }
.navbar-dark .navbar-toggler-icon {
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba(255,255,255,0.85)' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e") !important;
}

/* Dropdown hit areas for touch */
.dropdown-item { padding: 0.6rem 1rem; min-height: 44px; display: flex; align-items: center; }
@media (max-width: 576px) {
  .dropdown-menu.navbar-dark.bg-dark { min-width: 200px; }
}

/* Buttons: consistent sizes and stronger contrast */
.btn { border-radius: 8px; font-weight: 600; letter-spacing: 0.2px; }
.btn.btn-sm { padding: 0.45rem 0.7rem; }
.btn-primary { background-color: var(--btn-primary-bg) !important; border-color: var(--btn-primary-border) !important; color: var(--btn-primary-text) !important; }
.btn-success { background-color: var(--btn-success-bg) !important; border-color: var(--btn-success-border) !important; color: #fff !important; }
.btn-danger { background-color: var(--btn-danger-bg) !important; border-color: var(--btn-danger-border) !important; color: #fff !important; }
.btn-outline-light { color: var(--text) !important; border-color: var(--border) !important; }
@media (max-width: 576px) { .btn { padding: 0.6rem 0.9rem; font-size: 0.95rem; } }

/* Forms: inputs, selects, textareas */
.form-control, .custom-select, select.form-control, textarea.form-control, input.form-control {
  background-color: var(--input-bg) !important;
  color: var(--input-text) !important;
  border: 1px solid var(--input-border) !important;
  border-radius: 8px !important;
}
.form-control::placeholder { color: var(--input-placeholder); }
.form-control:focus, .custom-select:focus, select.form-control:focus, textarea.form-control:focus, input.form-control:focus {
  box-shadow: 0 0 0 0.2rem var(--focus-ring) !important;
  border-color: transparent !important;
}

/* Tables (Bootstrap) */
.table { color: var(--text-muted); }
.table thead th { color: var(--text); border-bottom-color: var(--border); }
.table td, .table th { border-top-color: var(--border); }

/* Alerts width responsiveness */
.w-md-50 { width: 50%; }
@media (max-width: 768px) { .w-md-50 { width: 100% !important; } }

/* Equipment icon spacing and size on small screens */
span.equipment-icon { max-width: 72px; }
@media (max-width: 576px) {
  span.equipment-icon img { max-height: 2.2em; max-width: 2.2em; }
}

/* Highcharts container spacing */
#accordion [id^="c_"] .card-body > #chart, #accordion [id^="c_"] [id^="c2_"] { margin-top: 0.25rem; }

/* Typography */
.text-white-50 { color: var(--text-muted) !important; }
.text-white { color: var(--text) !important; }

/* Utility paddings */
.pb-4 { padding-bottom: 1.25rem !important; }
.pb-md-5 { padding-bottom: 2rem !important; }
@media (min-width: 768px) { .pb-md-5 { padding-bottom: 3rem !important; } }

/* Table visual polish with midnight theme */
.tabulator { border-radius: 8px; overflow: hidden; border-color: var(--border); }
.tabulator .tabulator-header, .tabulator .tabulator-footer { background-color: #161b24; }

/* Improve dropdown divider visibility on dark */
.dropdown-divider.bg-dark { border-top-color: var(--border); }

/* Floating theme toggle button */
.theme-toggle-fab {
  position: fixed;
  right: 1rem;
  bottom: 1rem;
  z-index: 1050; /* above cards/navbar */
  width: 44px;
  height: 44px;
  border-radius: 999px !important;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background-color: rgba(255,255,255,0.06) !important;
  border-color: var(--border) !important;
}
.theme-toggle-fab:hover { background-color: rgba(255,255,255,0.12) !important; }
.theme-toggle-fab i { font-size: 1.1rem; }

/* Misc: make small badges more legible */
.badge { font-weight: 600; letter-spacing: 0.2px; }
.badge.badge-secondary { color: #111 !important; }

